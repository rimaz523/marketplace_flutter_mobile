trigger:
  branches:
    include:
      - master

stages:
- stage: 'Build'
  displayName: 'Build the Flutter App'
  jobs:
  - job: 'Android'
    displayName: 'Build Android'
    pool:
      vmImage: 'windows-latest'
    steps:
    - task: JavaToolInstaller@0
      inputs:
        versionSpec: '11'
        jdkArchitectureOption: 'x64'
        jdkSourceOption: 'PreInstalled'
    - task: Hey24sheep.flutter.flutter-install.FlutterInstall@0
      inputs:
        channel: 'stable'
        version: 'custom'
        customVersion: '3.7.11'

    - task: Hey24sheep.flutter.flutter-build.FlutterBuild@0
      inputs:
        projectDirectory: '.'

    - task: CopyFiles@2
      inputs:
        contents: '**/*.apk'
        targetFolder: '$(build.artifactStagingDirectory)'

    - task: PublishBuildArtifacts@1
